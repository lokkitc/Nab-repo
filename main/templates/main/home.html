{% extends 'main/base.html' %}
{% load static %}

{% block css_files %}
    <link rel="stylesheet" href="{% static 'main/css/home.css' %}">
{% endblock %}

{% block content %}
    <section class="brand-bar">
        <div class="container">
            <div class="brand-logos">
                {% for brand in brands|slice:":6" %}
                {% if brand.logo %}
                <div class="brand-logo">
                    <a href="{% url 'product:catalog' %}?category=&brand={{ brand.id }}&priceMin=&priceMax=&sorting=">
                        <img src="{{ brand.logo.url }}" alt="{{ brand.name }}">
                    </a>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </section>

    <main class="container">
        <section class="categories">
            <h2>–¢—Ä–µ–Ω–¥–æ–≤—ã–µ –ü—Ä–æ–¥—É–∫—Ç—ã</h2>
            <div class="category-filters">
                <button class="filter-btn active">–ë–µ—Å—Ç—Å–µ–ª–ª–µ—Ä</button>
                <button class="filter-btn">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¢–æ–≤–∞—Ä—ã</button>
                <button class="filter-btn">–ù–æ–≤—ã–π –ü—Ä–æ–¥—É–∫—Ç</button>
                <button class="filter-btn">–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –¢–æ–≤–∞—Ä—ã</button>
            </div>

            <div class="product-grid">
                {% if products %}
                {% for product in products %}
                        {% if product.status == 'published' %}
                        {% if product.get_absolute_url %}
                        <div class="product-item">
                            <div class="product-card">
                                {% if product.image %}
                                <img src="{{ product.image.url }}" alt="{{ product.name }}">
                                {% else %}
                                <img src="{% static 'product/images/placeholder.jpg' %}" alt="{{ product.name }}">
                                {% endif %}
                                <div class="product-name">{{product.name|truncatechars:20}}</div>
                                <div class="product-description">{{product.description|truncatechars:40}}</div>
                                <div class="product-price">{{product.price}} ‚Ç∏</div>
                                <p class="rating">
                                    –†–µ–π—Ç–∏–Ω–≥: {{ product.avg_rating|default:"–ù–µ—Ç –æ—Ü–µ–Ω–æ–∫"|floatformat:1 }}
                                </p>
                                <a href="{{ product.get_absolute_url }}" class="buy-button">–ö—É–ø–∏—Ç—å</a>
                            </div>
                        </div>
                        {% else %}
                        <p>–¢–æ–≤–∞—Ä–∞ –Ω–µ—Ç</p>
                        {% endif %}
                        {% endif %}
                    {% endfor %}
                    {% else %}
                    <p>–¢–æ–≤–∞—Ä–æ–≤ –Ω–µ—Ç</p>
                    {% endif %}
                </div>
            </div>
            </section>
        
        </section>

        <!-- Features -->
        <section class="features">
            <div class="feature">
                <div class="feature-icon">üöö</div>
                <h3>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</h3>
                <p>–ü—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 10 000‚Ç∏</p>
            </div>
            <div class="feature">
                <div class="feature-icon">üïí</div>
                <h3>24/7 –ü–æ–¥–¥–µ—Ä–∂–∫–∞</h3>
                <p>–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</p>
            </div>
            <div class="feature">
                <div class="feature-icon">üéÅ</div>
                <h3>–ë–æ–Ω—É—Å–Ω–∞—è –ü—Ä–æ–≥—Ä–∞–º–º–∞</h3>
                <p>–°–∫–∏–¥–∫–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º</p>
            </div>
        </section>

        <!-- Promotional Banners -->
        <section class="promo-section">
            <div class="promo-banner">
                <div class="promo-content">
                    <h3>{{ most_popular_product.name }}</h3>
                    <p>{{ most_popular_product.description }}</p>
                    <div class="price">{{ most_popular_product.price }}‚Ç∏</div>
                    <a href="{{ most_popular_product.get_absolute_url }}" class="buy-button">–ö—É–ø–∏—Ç—å</a>
                </div>
                <img src="{{ most_popular_product.image.url }}" alt="{{ most_popular_product.name }}">
            </div>
            <div class="promo-banner">
                <div class="promo-content">
                    <h3>{{ most_expensive_product.name }}</h3>
                    <p>{{ most_expensive_product.description }}</p>
                    <div class="price">{{ most_expensive_product.price }}‚Ç∏</div>
                    <a href="{{ most_expensive_product.get_absolute_url }}" class="buy-button">–ö—É–ø–∏—Ç—å</a>
                </div>
                <img src="{{ most_expensive_product.image.url }}" alt="{{ most_expensive_product.name }}">
            </div>
        </section>
    </main>
</body>
</html>

<main class="container">
    <!-- Promo Banner -->
    <section class="main-promo">
        <img src="https://images.unsplash.com/photo-1585155770447-2f66e2a397b5?auto=format&fit=crop&w=1200&h=400" alt="Promo Banner">
        <div class="promo-overlay">
            <h2>–°–∫–∏–¥–∫–∞ –î–æ 25%</h2>
            <p>–ü—Ä–æ–≤–µ—Ä—å –≠—Ç–æ</p>
            <button class="promo-btn">–£–∑–Ω–∞—Ç—å –ë–æ–ª—å—à–µ</button>
        </div>
    </section>

    <!-- Shop By Category -->
    <section class="shop-categories">
        <div class="section-header">
            <h2>–ö—É–ø–∏—Ç—å –ü–æ –ö–∞—Ç–µ–≥–æ—Ä–∏—è–º</h2>
            <a href="#" class="view-all">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ ‚Üí</a>
        </div>
        <div class="category-grid">
            <div class="category-card">
                <img src="https://images.unsplash.com/photo-1616763355603-9755a640a287?auto=format&fit=crop&w=400&h=300" alt="Audio Systems">
                <div class="category-info">
                    <h3>–ì–∞–¥–∂–µ—Ç—ã</h3>
                    <p>–û—Ç 50 000‚Ç∏</p>
                    <a href="{% url 'product:catalog' %}?name=&category=3&priceMin=&priceMax=&sorting=" class="category-btn">–°–º–æ—Ç—Ä–µ—Ç—å –í—Å–µ</a>
                </div>
            </div>
            <div class="category-card">
                <img src="https://images.unsplash.com/photo-1593642632823-8f785ba67e45?auto=format&fit=crop&w=400&h=300" alt="Laptops">
                <div class="category-info">
                    <h3>–ù–æ—É—Ç–±—É–∫–∏</h3>
                    <p>–û—Ç 250 000‚Ç∏</p>
                    <a href="{% url 'product:catalog' %}?name=&category=2&priceMin=&priceMax=&sorting=" class="category-btn">–°–º–æ—Ç—Ä–µ—Ç—å –í—Å–µ</a>
                </div>
            </div>
        </div>
    </section>

    
</main>


</body>
</html>

{% endblock %}